!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).TinyValidator=e()}}(function(){var e=function(){function n(e,r){for(var i=0;i<r.length;i++){var n=r[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,r,i){return r&&n(e.prototype,r),i&&n(e,i),e}}();var p=require("lodash"),r=require("prop-types"),v=function(e){return message.error(e)},i=function(){function i(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],r=1<arguments.length&&void 0!==arguments[1]&&arguments[1];!function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,i),this.rules=e,this.showAllErrors=r}return e(i,[{key:"validate",value:function(e){for(var r=!0,i=p.keys(e),n=0;n<i.length;n++){var t=i[n];if(!this.showAllErrors&&!r)break;for(var o=0;o<this.rules.length;o++){var s=this.rules[o];if(t===s.field){var a=s.isRequired,l=s.fieldDesc,f=s.re,u=s.message,d=s.callback,c=void 0===d?v:d,h=e[t];if(a&&!h){c(l+"不能为空"),r=!1;break}if(h&&f&&!f.test(h)){c(u),r=!1;break}if(h&&f&&f.test(h)){c("");break}}}}return r}},{key:"run",value:function(e){return this.validate(e)}}]),i}();return i.propTypes={rules:r.arrayOf(r.shape({field:r.string.isRequired,re:r.object.isRequired,message:r.string.isRequired,callback:r.func,isRequired:r.bool,fieldDesc:r.string}).isRequired).isRequired,showAllErrors:r.bool},(void 0).Validator=i,TinyValidator});