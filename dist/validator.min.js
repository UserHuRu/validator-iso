!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).Validator=e()}}(function(){var e=function(){function t(e,r){for(var n=0;n<r.length;n++){var t=r[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}();var t={through:!1,callback:function(e){return console.log(e)}};return function(){function n(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],r=arguments[1];!function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,n),this.rules=e,this.options=Object.assign(t,r),this._errors=void 0,this._form=void 0}return e(n,null,[{key:"mergeErrors",value:function(){for(var e={},r=0;r<arguments.length;r++)e=Object.assign(e,arguments[r].errors()||{});return e}}]),e(n,[{key:"validate",value:function(e){this._form=e,this._errors={};for(var r=this.options.through,n=!0,t=function(e){var r=[];for(i in e)r.push(i);return r}(e),o=0;o<t.length;o++){var s=t[o];if(!r&&!n)break;for(var f=0;f<this.rules.length;f++){var a=this.rules[f];if(s===a.field){var u=a.isRequired,l=a.fieldDesc,c=a.re,d=a.message,h=void 0===d?" "+l+"格式不正确":d,v=a.callback,b=void 0===v?this.options.callback:v,p=e[s];if(u&&!p){b(l+"不能为空"),this._errors[s]=l+"不能为空",n=!1;break}if(p&&c&&!c.test(p)){b(h),this._errors[s]=h,n=!1;break}}}}return n}},{key:"run",value:function(e){return this.validate(e)}},{key:"errors",value:function(){return this._errors}}]),n}()});