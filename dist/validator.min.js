!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).Validator=e()}}(function(){var e=function(){function n(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,r,t){return r&&n(e.prototype,r),t&&n(e,t),e}}();var n={through:!1,callback:function(e){return console.log(e)}};return function(){function t(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],r=arguments[1];!function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,t),this.rules=e,this.options=Object.assign(n,r),this._errors=void 0,this._form=void 0}return e(t,null,[{key:"mergeErrors",value:function(){for(var e={},r=0;r<arguments.length;r++)e=Object.assign(e,arguments[r].errors()||{});return e}}]),e(t,[{key:"validate",value:function(e){this._form=e,this._errors={};for(var r=this.options.through,t=!0,n=function(e){var r=[];for(i in e)r.push(i);return r}(e),o=0;o<n.length;o++){var s=n[o];if(!r&&!t)break;for(var f=0;f<this.rules.length;f++){var a=this.rules[f];if(s===a.field){var u=a.isRequired,l=a.fieldDesc,c=a.re,h=a.message,d=void 0===h?" "+l+"格式不正确":h,v=a.callback,b=void 0===v?this.options.callback:v,p=e[s];if(u&&!p){b(l+"不能为空"),this._errors[s]=l+"不能为空",t=!1;break}if(u&&p&&(b(""),this._errors[s]=""),p&&c&&!c.test(p)){b(d),this._errors[s]=d,t=!1;break}p&&c&&c.test(p)&&(b(""),this._errors[s]="")}}}return t}},{key:"run",value:function(e){return this.validate(e)}},{key:"errors",value:function(){return this._errors}}]),t}()});